!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/animations")):"function"==typeof define&&define.amd?define("angular-mgl-timeline",["exports","@angular/core","@angular/animations"],t):t(e["angular-mgl-timeline"]={},e.ng.core,e.ng.animations)}(this,function(e,o,n){"use strict";var t=function(){function e(){}return e.decorators=[{type:o.Component,args:[{selector:"mgl-timeline-entry-header",template:"<ng-content></ng-content>",styles:[":host{position:relative;display:block;overflow:hidden;padding:15px;text-align:center}"]}]}],e}(),s=Object.assign||function s(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=function(){function e(e,t,n,i){this.animationBuilder=e,this.elementRef=t,this.renderer=n,this.changeDetectorRef=i,this._expanded=!1,this._alternate=!1,this._mobile=!1,this._size=50,this.animationDone=new o.EventEmitter,this.clazz="primary"}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e,this.setStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate},set:function(e){this._alternate=e,this.setStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mobile",{get:function(){return this._mobile},set:function(e){this._mobile=e,this.setStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){var t=this._expanded!==e;this._expanded=e,t?this.animate():this.setStyle()},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.initialStyle=window.getComputedStyle(this.elementRef.nativeElement),this.setStyle(),this.changeDetectorRef.detectChanges()},e.prototype.getCollapsedStyle=function(){return{top:"50%",left:this.alternate||this.mobile?"-5px":"calc(100% + 5px)",width:this.size+"px",height:this.size+"px",opacity:1,transform:"translateY(-50%) translateX(-50%)",boxShadow:this.initialStyle&&this.initialStyle.boxShadow,borderRadius:"100px"}},e.prototype.getTransitionStyle=function(){return s({},this.getCollapsedStyle(),{left:"50%",opacity:.5,boxShadow:"none"})},e.prototype.getExpandedStyle=function(){return s({},this.getTransitionStyle(),{left:"0",transform:"translateX(0) translateY(-50%)",width:"100%",height:"100%",opacity:1,borderRadius:0})},e.prototype.animate=function(){var e=this;this.destroyAnimation(),this.expanded?(this.animation=this.animationBuilder.build([n.style(this.getCollapsedStyle()),n.animate("200ms ease",n.style(this.getTransitionStyle())),n.animate("200ms ease",n.style(this.getExpandedStyle()))]).create(this.elementRef.nativeElement),this.animation.onDone(function(){return e.animationDone.emit({toState:"expanded"})})):(this.animationBuilder,this.animation=this.animationBuilder.build([n.style(this.getExpandedStyle()),n.animate("100ms ease",n.style(this.getTransitionStyle())),n.animate("100ms ease",n.style(this.getCollapsedStyle()))]).create(this.elementRef.nativeElement),this.animation.onDone(function(){return e.animationDone.emit({toState:"collapsed"})})),this.animation.play()},e.prototype.setStyle=function(){var t=this;this.destroyAnimation();var n=this.expanded?this.getExpandedStyle():this.getCollapsedStyle();Object.keys(n).forEach(function(e){t.renderer.setElementStyle(t.elementRef.nativeElement,e,n[e])})},e.prototype.destroyAnimation=function(){this.animation&&(this.animation.destroy(),delete this.animation)},e.decorators=[{type:o.Component,args:[{selector:"mgl-timeline-entry-dot",template:"<ng-content></ng-content>\n",styles:[":host{display:block;position:absolute}"]}]}],e.ctorParameters=function(){return[{type:n.AnimationBuilder},{type:o.ElementRef},{type:o.Renderer},{type:o.ChangeDetectorRef}]},e.propDecorators={clazz:[{type:o.Input,args:["class"]},{type:o.HostBinding,args:["class"]}],size:[{type:o.Input}]},e}(),a=function(){function e(e,t,n){this.elementRef=e,this.animationBuilder=t,this.renderer=n,this.animationDone=new o.EventEmitter,this._expanded=!1}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this.contentHeight=this.elementRef.nativeElement.scrollHeight;var t=this._expanded!==e;this._expanded=e,t?this.animate():this.setStyle},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.contentHeight=this.elementRef.nativeElement.scrollHeight,this.setStyle()},e.prototype.getCollapsedStyle=function(){return{height:0}},e.prototype.getExpandedStyle=function(){return{height:this.contentHeight+"px"}},e.prototype.animate=function(){var e,t=this;this.expanded?((e=this.animationBuilder.build([n.style(this.getCollapsedStyle()),n.animate("100ms ease",n.style(this.getExpandedStyle()))]).create(this.elementRef.nativeElement)).onDone(function(){return t.animationDone.emit({toState:"expanded"})}),e.play()):(this.animationBuilder,(e=this.animationBuilder.build([n.style(this.getExpandedStyle()),n.animate("200ms ease",n.style(this.getCollapsedStyle()))]).create(this.elementRef.nativeElement)).onDone(function(){return t.animationDone.emit({toState:"collapsed"})}),e.play())},e.prototype.setStyle=function(){var t=this,n=this.expanded?this.getExpandedStyle():this.getCollapsedStyle();Object.keys(n).forEach(function(e){t.renderer.setElementStyle(t.elementRef.nativeElement,e,n[e])})},e.decorators=[{type:o.Component,args:[{selector:"mgl-timeline-entry-content",template:"<div><ng-content></ng-content></div>",styles:[":host{position:relative;display:block;overflow:hidden}:host>div{padding:10px}"]}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:n.AnimationBuilder},{type:o.Renderer}]},e}(),r=function(){function e(e){this.elementRef=e}return Object.defineProperty(e.prototype,"alternate",{set:function(e){this.elementRef.nativeElement.classList.toggle("alternate",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mobile",{set:function(e){this.elementRef.nativeElement.classList.toggle("mobile",e)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Component,args:[{selector:"mgl-timeline-entry-side",template:"<ng-content></ng-content>",styles:[":host{position:absolute;top:0;left:100%;width:100%;text-align:center}:host.alternate{left:-100%}:host.mobile{display:none}"]}]}],e.ctorParameters=function(){return[{type:o.ElementRef}]},e}(),l=function(){function e(e){this.elementRef=e,this.subscriptions=[],this.focusOnOpen=!1,this._mobile=!1,this.changed=new o.EventEmitter,this.animationDone=new o.EventEmitter}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this.dot?this.dot.expanded&&this.content.expanded:this.content.expanded},set:function(e){this.dot&&e?this.dot.expanded=e:this.content.expanded=e,this.changed.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mobile",{set:function(e){this.elementRef.nativeElement.classList.toggle("mobile",e),this.dot&&(this.dot.mobile=e),this.side&&(this.side.mobile=e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.dot&&this.subscriptions.push(this.dot.animationDone.subscribe(function(e){"expanded"===e.toState?t.content.expanded=!0:t.animationDone.emit(e)})),this.content&&this.subscriptions.push(this.content.animationDone.subscribe(function(e){t.dot&&"collapsed"===e.toState?t.dot.expanded=!1:(t.focusOnOpen&&t.elementRef.nativeElement.scrollIntoView({behavior:"smooth"}),t.animationDone.emit(e))}))},Object.defineProperty(e.prototype,"alternate",{set:function(e){this.elementRef.nativeElement.classList.toggle("alternate",e),this.dot&&(this.dot.alternate=e),this.side&&(this.side.alternate=e)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})},e.prototype.collapse=function(){this.expanded=!1},e.prototype.expand=function(){this.expanded=!0},e.prototype.toggle=function(){this.expanded=!this.expanded},e.decorators=[{type:o.Component,args:[{selector:"mgl-timeline-entry",template:'<ng-content select="mgl-timeline-entry-side"></ng-content>\n<div class="mgl-timeline-entry-card">\n  <div class="mgl-timeline-entry-card-header" (click)="toggle()">\n    <ng-content select="mgl-timeline-entry-dot"></ng-content>\n    <ng-content select="mgl-timeline-entry-header"></ng-content>\n  </div>\n  <ng-content select="mgl-timeline-entry-content"></ng-content>\n</div>',styles:[":host{display:block;position:relative;margin-bottom:50px;width:calc(50% - 5px)}:host.alternate{margin-left:calc(50% + 5px)}:host.mobile{width:calc(100% - 30px);margin-left:30px}:host .mgl-timeline-entry-card{background-color:#f0f0f0}:host .mgl-timeline-entry-card .mgl-timeline-entry-card-header{position:relative;background-color:#e6e6e6}"]}]}],e.ctorParameters=function(){return[{type:o.ElementRef}]},e.propDecorators={changed:[{type:o.Output}],animationDone:[{type:o.Output}],content:[{type:o.ContentChild,args:[a]}],header:[{type:o.ContentChild,args:[t]}],dot:[{type:o.ContentChild,args:[i]}],side:[{type:o.ContentChild,args:[r]}]},e}(),c=function(){function e(e,t){this.elementRef=e,this.changeDetectorRef=t,this.toggle=!0,this.alternate=!0,this._focusOnOpen=!1,this.subscriptions=[]}return Object.defineProperty(e.prototype,"mobile",{get:function(){return this.elementRef.nativeElement.classList.contains("mobile")},set:function(t){this.content&&this.content.forEach(function(e){return e.mobile=t}),this.elementRef.nativeElement.classList.toggle("mobile",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusOnOpen",{get:function(){return this._focusOnOpen},set:function(t){this.content&&this.content.forEach(function(e){return e.focusOnOpen=t}),this._focusOnOpen=t},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.updateContent()},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})},e.prototype.ngAfterViewInit=function(){var t=this;this.mobile=this.elementRef.nativeElement.clientWidth<640,setTimeout(function(){return t.updateContent()}),this.content.changes.subscribe(function(e){t.updateContent()})},e.prototype.updateContent=function(){var n=this;this.ngOnDestroy(),this.content&&this.content.forEach(function(t,e){n.toggle&&n.subscriptions.push(t.changed.subscribe(function(e){!0===e&&n.content.filter(function(e){return e!==t}).forEach(function(e){return e.collapse()})})),t.alternate=!!n.alternate&&e%2!=0,t.mobile=n.mobile,t.focusOnOpen=n.focusOnOpen})},e.prototype.onResize=function(e){this.mobile=this.elementRef.nativeElement.clientWidth<640},e.decorators=[{type:o.Component,args:[{selector:"mgl-timeline",template:'<div class="mgl-timeline-line"></div>\n<ng-content></ng-content>',styles:[":host{position:relative;display:block;padding:50px 0}:host .mgl-timeline-line{position:absolute;top:0;height:100%;background-color:#a0a0a0;left:50%;width:10px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}:host.mobile .mgl-timeline-line{left:20px;-webkit-transform:none;transform:none}"]}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:o.ChangeDetectorRef}]},e.propDecorators={toggle:[{type:o.Input}],alternate:[{type:o.Input}],focusOnOpen:[{type:o.Input}],content:[{type:o.ContentChildren,args:[l]}],onResize:[{type:o.HostListener,args:["window:resize",["$event"]]}]},e}(),p=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[c,l,t,r,a,i],exports:[c,l,t,r,a,i]}]}],e}();e.MglTimelineModule=p,e.ɵc=a,e.ɵe=i,e.ɵd=t,e.ɵf=r,e.ɵb=l,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-mgl-timeline.umd.min.js.map